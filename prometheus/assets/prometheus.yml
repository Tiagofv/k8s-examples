global:
  scrape_interval: 15s

scrape_configs:

  - job_name: kubelet
    kubernetes_sd_configs:
      - role: node
    scheme: https
    tls_config:
      ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
    authorization:
      credentials_file: /var/run/secrets/kubernetes.io/serviceaccount/token

  # - job_name: ingress
  #   kubernetes_sd_configs:
  #     - role: ingress
  #   scheme: https

  - job_name: services
    kubernetes_sd_configs:
      - role: service
    relabel_configs:
      - source_labels: [ __meta_kubernetes_service_label_prometheus_io_scrape ]
        regex: "true"
        action: keep

  - job_name: pods
    kubernetes_sd_configs:
      - role: pod
    relabel_configs:
      - source_labels: [ __meta_kubernetes_pod_label_prometheus_io_scrape ]
        regex: "true"
        action: keep

  # - job_name: endpoints
  #   kubernetes_sd_configs:
  #     - role: endpoints
