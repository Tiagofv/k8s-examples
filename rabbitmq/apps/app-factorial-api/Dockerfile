FROM node:16.16-alpine

WORKDIR /app

EXPOSE 3000

ENTRYPOINT ["npm"]

CMD ["start"]

COPY ./package*.json ./

ENV AWS_ACCESS_KEY_ID=
ENV AWS_ENDPOINT=
ENV AWS_SECRET_ACCESS_KEY=
ENV RABBITMQ_HOST=
ENV RABBITMQ_PASSWORD=
ENV RABBITMQ_PORT=
ENV RABBITMQ_USERNAME=

ENV NODE_ENV=production
ENV PORT=3000

RUN npm install

COPY . .

USER 1000
